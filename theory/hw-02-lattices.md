# Теоретическое ДЗ №2: Анализ на решётках

### Вопрос №1:

У решетки есть максимальный и минимальный элементы (⊤, ⊥)
* Являются ли они точной верхней или нижней гранью какого-либо
подмножества `S` (poset, образующий решетку)?
* Уникальны ли они?

### Ответ на вопрос №1:

* Точно являются верхней / нижней, хотя бы каких-то двух элементов: 
   * Для ⊤ возьмём весь poset `S`, и найдём его точную верхнюю грань, лежащую **строго внутри `S`**: Если она нашлась, то этот элемент `S` и есть ⊤, который меньше всех элементов, либо этот элемент не нашелся внутри `S`, тогда ⊤ вводится явно как "Top, являющийся максимальным элементом".
   * Для ⊥ доказательство аналогично. Таким образом, мы предъявили для всех решеток доказательство существования множества элементов из poset, для которых точной верхней / нижней гранью являются ⊤ / ⊥.
* Они не обязательно уникальны, например, во flat-решетке можно взять любое подмножество образующего множества

### Вопрос №2:

* Как выглядит точная верхняя грань произведения решеток? А точная нижняя?
* Какая высота у произведения решеток

### Ответ на вопрос №2:

* Для `L1 x L2 x ... x Ln` как `(⊤1, ⊤2, ..., ⊤N)` и `(⊥1, ⊥2, ..., ⊥N)`.
* Высота произведения решеток `L1 x L2 x ... x Ln` равна сумме высот решёток "сомножителей":
    * Поскольку высота это длина максимального пути от ⊤ до ⊥, то сначала можно начать с вектора `(⊤1, ⊤2, ..., ⊤N)`, а потом, сначала спуститься по первой координате по самому длинному пути решетки `L1` до `(⊥1, ⊤2, ..., ⊤N)`, потом по второй координате до `(⊥1, ⊥2, ..., ⊤N)`, и так далее, таким образом пройдя по самому длинному пути, длина которого равна сумме длин самых длинных путей в исходных решетках.

### Вопрос №3:

* Как выглядит точная верхняя грань решётки отображений? А точная нижняя?
* Какая высота у решётки отображений

### Ответ на вопрос №3:

* Отображение, отображающее для каждого элемента в ⊤ или ⊥.
* Можно сказать, что решетка отображений `A -> L` изоморфна `L^A`, то есть, выходит, что высота решетки отображений `A -> L` равна `|A| * h(L)`.

### Вопрос №4:

Можно ли выразить анализ типов с предыдущей лекции как
анализ над решетками?

### Ответ на вопрос №4:

Да, можно представить нашу решетку как flat над множеством всевозможных типов (возможно, рекурсивных). Ничего не сломается, но и польза только очень сомнительна: если предположить, что в TIP добавят POD-структуры (record types), то можно смотреть на тип переменной в каждой точке программы, что позволит эффективнее (in question) работать с памятью.

### Вопрос №5:

Можно ли выразить анализ над решетками как анализ типов?

### Ответ на вопрос №5:

Да, можно, subtyping. Но часто в системах типов нет ⊤ или ⊥. В ООП языках, чаще всего, есть хотя бы либо ⊤ либо ⊥; в языке C++, например, нету ни ⊤, ни ⊥. Можно конечно свести явно систему типов к решетке, но тогда неясно: зачем было сводить анализ на решетке как анализ на типах?
